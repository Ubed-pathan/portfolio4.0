@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }
  
  body {
    @apply font-sans antialiased;
    /* Simple base background */
    background: 
      linear-gradient(135deg, 
        rgb(255, 255, 255) 0%,
        rgb(248, 250, 252) 50%,
        rgb(241, 245, 249) 100%
      );
    min-height: 100vh;
  }

  /* Dark mode background */
  html.dark body {
    background: 
      linear-gradient(135deg, 
        rgb(15, 23, 42) 0%,
        rgb(30, 41, 59) 50%,
        rgb(15, 23, 42) 100%
      );
  }
}

@layer utilities {
  /* Ensure proper z-index stacking */
  .z-background {
    z-index: -10;
  }

  .z-content {
    z-index: 10;
  }

  /* Lightweight moving wave effect */
  .wave-bg {
    position: relative;
    overflow: hidden;
  }

  .wave-bg::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 200%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 100%
    );
    animation: wave-slow 8s linear infinite;
    pointer-events: none;
  }

  html.dark .wave-bg::before {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(71, 85, 105, 0.1) 50%,
      transparent 100%
    );
  }

  /* Performance optimized animations */
  .animate-float-light {
    animation: float-slow 10s ease-in-out infinite;
    will-change: transform;
  }

  .animate-pulse-gentle {
    animation: pulse-gentle 8s ease-in-out infinite;
    will-change: opacity, transform;
  }

  /* GPU acceleration for smooth performance */
  .gpu-accelerate {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000;
  }

  /* 3D GPU optimizations */
  .gpu-accelerate-3d {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
    transform-style: preserve-3d;
  }

  /* Enhanced 3D animations for laptops */
  @media (min-width: 1024px) {
    .animate-3d-float {
      animation: float-3d 15s ease-in-out infinite;
      transform-style: preserve-3d;
    }

    .animate-3d-rotate {
      animation: rotate-3d 20s linear infinite;
      transform-style: preserve-3d;
    }
  }

  @keyframes float-3d {
    0%, 100% { 
      transform: translateY(0px) rotateX(0deg) rotateY(0deg); 
    }
    25% { 
      transform: translateY(-30px) rotateX(15deg) rotateY(90deg); 
    }
    50% { 
      transform: translateY(-50px) rotateX(30deg) rotateY(180deg); 
    }
    75% { 
      transform: translateY(-30px) rotateX(15deg) rotateY(270deg); 
    }
  }

  @keyframes rotate-3d {
    0% { 
      transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg); 
    }
    33% { 
      transform: rotateX(120deg) rotateY(120deg) rotateZ(120deg); 
    }
    66% { 
      transform: rotateX(240deg) rotateY(240deg) rotateZ(240deg); 
    }
    100% { 
      transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg); 
    }
  }

  /* Mobile-first approach */
  @media (max-width: 768px) {
    .desktop-only-animate {
      animation: none !important;
    }
    
    .mobile-reduce-motion {
      animation-duration: 0.5s !important;
      animation-iteration-count: 1 !important;
    }
  }
}

/* Performance and accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }

  body {
    animation: none !important;
  }

  body::before,
  body::after {
    animation: none !important;
  }
}

/* High performance mode for older devices */
@media (max-width: 480px), (max-height: 600px) {
  body {
    animation-duration: 30s !important;
  }

  body::before,
  body::after {
    display: none;
  }
}

/* Reduce animations when battery is low */
@media (prefers-reduced-data: reduce) {
  body::before,
  body::after {
    display: none;
  }

  body {
    animation: none;
    background: 
      rgb(255, 255, 255);
  }

  html.dark body {
    background: rgb(15, 23, 42);
  }
}
